Implement “canvas click to close UI” + “double-click to fullscreen” for my React Three Fiber music visualizer app.

Context:
- App has a full-screen R3F <Canvas> (the main visualizer).
- UI has panels/drawers/menus (Create Mode left PresetPanel, right ControlPanel, Library drawer, SoundCloud drawer, any dropdowns/modals).
- I want a clean interaction rule:
  1) Single click (or tap) on the canvas area closes ALL open UI surfaces.
  2) Double click (or double tap) on the canvas toggles fullscreen.
- It must NOT break slider dragging, button clicks, or interactions inside UI panels.

Requirements:
1) Add an overlay click-catcher that covers only the canvas area (not the UI panels), OR attach pointer handlers to the canvas container, so that clicks on the visualization background (not on UI) trigger “closeAllUI()”.
2) Prevent closing UI when the user clicks any UI element:
   - If event target is inside a UI container, do nothing.
   - Use stopPropagation on UI containers or check with closest('[data-ui-root="true"]').
3) On double click on the canvas, toggle fullscreen:
   - If not fullscreen -> requestFullscreen on the root container (e.g., document.documentElement or an #appRoot).
   - If fullscreen -> exitFullscreen.
4) Also support keyboard shortcut: “F” toggles fullscreen.
5) Mobile support:
   - Single tap closes UI surfaces.
   - Double tap toggles fullscreen (implement a 250–300ms double tap detector).
6) CloseAllUI() must set all these states to false (or “none”):
   - libraryDrawerOpen = false
   - soundcloudDrawerOpen = false
   - presetPanelOpen = false (if applicable)
   - controlPanelOpen = false (if applicable)
   - anyDropdownOpen = false
   - anyModalOpen = false
7) If user is currently dragging a slider or interacting with a control, do not close UI on pointerup/click. Use a flag like isInteracting = true while dragging.
8) Code must be clean and production-ready. Show:
   - React state shape (UIState)
   - closeAllUI() function
   - fullscreen toggle function with proper vendor-safe handling
   - where to place handlers (Canvas wrapper div) and data attributes for UI roots
   - how to stop propagation from UI panels

Deliverable:
Provide the React/TypeScript code implementing this behavior, including:
- UI state store (useState or Zustand)
- Canvas wrapper handlers (onPointerDown / onClick / onDoubleClick)
- Double-tap logic for mobile
- Fullscreen toggle utilities
